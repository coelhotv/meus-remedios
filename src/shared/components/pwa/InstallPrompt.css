/**
 * PWA Install Prompt Styles
 * 
 * Glassmorphism design following project design tokens
 * Responsive for mobile and desktop
 */

/* ============================================
   MAIN INSTALL PROMPT BANNER
   ============================================ */
.install-prompt {
  position: fixed;
  top: 16px; /* Position at top of viewport */
  left: 16px;
  right: 16px;
  z-index: 9999; /* Highest z-index to ensure clickability */
  pointer-events: auto;

  background: var(--glass-standard, rgba(255, 255, 255, 0.08));
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-heavy, rgba(255, 255, 255, 0.15));
  border-radius: var(--border-radius-xl, 16px);
  box-shadow: var(--shadow-2xl, 0 25px 50px -12px rgba(0, 0, 0, 0.5));

  padding: var(--spacing-md, 16px);
  max-width: 600px;
  margin: 0 auto;
}

.install-prompt__content {
  display: flex;
  align-items: center;
  gap: var(--spacing-md, 16px);
}

/* App Icon */
.install-prompt__icon {
  flex-shrink: 0;
  width: 48px;
  height: 48px;
  background: linear-gradient(
    135deg,
    var(--color-primary, #ec4899),
    var(--color-secondary, #06b6d4)
  );
  border-radius: var(--border-radius-lg, 12px);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  box-shadow: var(--shadow-md, 0 4px 6px -1px rgba(0, 0, 0, 0.3));
}

/* Text Content */
.install-prompt__text {
  flex: 1;
  min-width: 0;
}

.install-prompt__title {
  font-size: var(--font-size-base, 16px);
  font-weight: var(--font-weight-semibold, 600);
  color: var(--color-text-primary, #ffffff);
  margin: 0 0 var(--spacing-xs, 4px) 0;
  line-height: 1.3;
}

.install-prompt__description {
  font-size: var(--font-size-sm, 14px);
  color: var(--color-text-secondary, rgba(255, 255, 255, 0.7));
  margin: 0;
  line-height: 1.4;
}

/* Actions */
.install-prompt__actions {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm, 8px);
  flex-shrink: 0;
}

.install-prompt__install-btn {
  background: linear-gradient(
    135deg,
    var(--color-primary, #ec4899),
    var(--color-primary-dark, #db2777)
  );
  color: white;
  border: none;
  border-radius: var(--border-radius-md, 8px);
  padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
  font-size: var(--font-size-sm, 14px);
  font-weight: var(--font-weight-medium, 500);
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  pointer-events: auto;
  position: relative;
  z-index: 10000;
}

.install-prompt__install-btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.4));
  background: linear-gradient(
    135deg,
    var(--color-primary-light, #f472b6),
    var(--color-primary, #ec4899)
  );
}

.install-prompt__install-btn:active {
  transform: translateY(0);
}

.install-prompt__dismiss-btn {
  background: var(--glass-light, rgba(255, 255, 255, 0.03));
  border: 1px solid var(--glass-heavy, rgba(255, 255, 255, 0.15));
  color: var(--color-text-secondary, rgba(255, 255, 255, 0.7));
  border-radius: var(--border-radius-md, 8px);
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 16px;
  padding: 0;
  pointer-events: auto;
  position: relative;
  z-index: 10000;
}

.install-prompt__dismiss-btn:hover {
  background: var(--glass-standard, rgba(255, 255, 255, 0.08));
  color: var(--color-text-primary, #ffffff);
}

/* ============================================
   MODAL OVERLAY & INSTRUCTIONS
   ============================================ */
.install-prompt__modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  z-index: var(--z-index-modal, 1000);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-lg, 24px);
}

.install-prompt__modal {
  background: var(--glass-standard, rgba(255, 255, 255, 0.08));
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-heavy, rgba(255, 255, 255, 0.15));
  border-radius: var(--border-radius-xl, 16px);
  box-shadow: var(--shadow-2xl, 0 25px 50px -12px rgba(0, 0, 0, 0.5));
  width: 100%;
  max-width: 400px;
  overflow: hidden;
}

/* Modal Header */
.install-prompt__modal-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md, 16px);
  padding: var(--spacing-lg, 24px) var(--spacing-lg, 24px) var(--spacing-md, 16px);
  border-bottom: 1px solid var(--glass-heavy, rgba(255, 255, 255, 0.15));
}

.install-prompt__modal-icon {
  font-size: 32px;
}

.install-prompt__modal-title {
  flex: 1;
  font-size: var(--font-size-lg, 18px);
  font-weight: var(--font-weight-semibold, 600);
  color: var(--color-text-primary, #ffffff);
  margin: 0;
}

.install-prompt__modal-close {
  background: none;
  border: none;
  color: var(--color-text-secondary, rgba(255, 255, 255, 0.7));
  font-size: 20px;
  cursor: pointer;
  padding: var(--spacing-xs, 4px);
  line-height: 1;
  transition: color 0.2s ease;
}

.install-prompt__modal-close:hover {
  color: var(--color-text-primary, #ffffff);
}

/* Modal Content */
.install-prompt__modal-content {
  padding: var(--spacing-lg, 24px);
}

.install-prompt__steps {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md, 16px);
}

.install-prompt__step {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-md, 16px);
}

.install-prompt__step-number {
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  background: linear-gradient(
    135deg,
    var(--color-primary, #ec4899),
    var(--color-secondary, #06b6d4)
  );
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-sm, 14px);
  font-weight: var(--font-weight-semibold, 600);
  color: white;
}

.install-prompt__step-text {
  flex: 1;
  font-size: var(--font-size-base, 16px);
  color: var(--color-text-secondary, rgba(255, 255, 255, 0.85));
  line-height: 1.5;
  padding-top: 2px;
}

/* iOS Hint */
.install-prompt__ios-hint {
  margin-top: var(--spacing-lg, 24px);
  padding: var(--spacing-md, 16px);
  background: var(--glass-light, rgba(255, 255, 255, 0.03));
  border-radius: var(--border-radius-lg, 12px);
  border: 1px solid var(--glass-heavy, rgba(255, 255, 255, 0.1));
  display: flex;
  align-items: center;
  gap: var(--spacing-sm, 8px);
  font-size: var(--font-size-sm, 14px);
  color: var(--color-text-secondary, rgba(255, 255, 255, 0.7));
}

.install-prompt__share-icon {
  width: 16px;
  height: 16px;
  fill: currentColor;
  vertical-align: middle;
  margin: 0 4px;
}

/* Modal Footer */
.install-prompt__modal-footer {
  padding: var(--spacing-md, 16px) var(--spacing-lg, 24px) var(--spacing-lg, 24px);
  border-top: 1px solid var(--glass-heavy, rgba(255, 255, 255, 0.15));
}

.install-prompt__modal-btn {
  width: 100%;
  background: linear-gradient(
    135deg,
    var(--color-primary, #ec4899),
    var(--color-secondary, #06b6d4)
  );
  color: white;
  border: none;
  border-radius: var(--border-radius-md, 8px);
  padding: var(--spacing-md, 16px);
  font-size: var(--font-size-base, 16px);
  font-weight: var(--font-weight-semibold, 600);
  cursor: pointer;
  transition: all 0.2s ease;
  pointer-events: auto;
  position: relative;
  z-index: 10001;
}

.install-prompt__modal-btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.4));
}

.install-prompt__modal-btn:active {
  transform: translateY(0);
}

/* ============================================
   RESPONSIVE DESIGN
   ============================================ */

/* Desktop adjustments */
@media (min-width: 768px) {
  .install-prompt {
    top: 24px; /* No BottomNav on desktop */
    left: 24px;
    right: 24px;
    padding: var(--spacing-lg, 24px);
  }

  .install-prompt__icon {
    width: 56px;
    height: 56px;
    font-size: 28px;
  }

  .install-prompt__title {
    font-size: var(--font-size-lg, 18px);
  }

  .install-prompt__description {
    font-size: var(--font-size-base, 16px);
  }

  .install-prompt__install-btn {
    padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
    font-size: var(--font-size-base, 16px);
  }
}

/* Small mobile screens */
@media (max-width: 360px) {
  .install-prompt {
    left: 12px;
    right: 12px;
    padding: var(--spacing-sm, 12px);
  }

  .install-prompt__content {
    gap: var(--spacing-sm, 8px);
  }

  .install-prompt__icon {
    width: 40px;
    height: 40px;
    font-size: 20px;
  }

  .install-prompt__title {
    font-size: var(--font-size-sm, 14px);
  }

  .install-prompt__description {
    font-size: var(--font-size-xs, 12px);
  }

  .install-prompt__install-btn {
    padding: var(--spacing-xs, 8px) var(--spacing-sm, 12px);
    font-size: var(--font-size-xs, 12px);
  }

  .install-prompt__dismiss-btn {
    width: 32px;
    height: 32px;
  }
}

/* Safe area for notched devices */
@supports (padding-top: env(safe-area-inset-top)) {
  .install-prompt {
    padding-top: calc(var(--spacing-md, 16px) + env(safe-area-inset-top));
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .install-prompt,
  .install-prompt__install-btn,
  .install-prompt__dismiss-btn,
  .install-prompt__modal-btn {
    transition: none;
  }

  .install-prompt__install-btn:hover,
  .install-prompt__modal-btn:hover {
    transform: none;
  }
}
